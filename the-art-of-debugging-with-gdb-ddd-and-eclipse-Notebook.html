<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "XHTML1-s.dtd" >
<html xmlns="http://www.w3.org/TR/1999/REC-html-in-xml" xml:lang="en" lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
<style>
.bodyContainer {
    font-family: Arial, Helvetica, sans-serif;
    text-align: center;
    padding-left: 32px;
    padding-right: 32px;
}

.notebookFor {
    font-size: 18px;
    font-weight: 700;
    text-align: center;
    color: rgb(119, 119, 119);
    margin: 24px 0px 0px;
    padding: 0px;
}

.bookTitle {
    font-size: 32px;
    font-weight: 700;
    text-align: center;
    color: #333333;
    margin-top: 22px;
    padding: 0px;
}

.authors {
    font-size: 13px;
    font-weight: 700;
    text-align: center;
    color: rgb(119, 119, 119);
    margin-top: 22px;
    margin-bottom: 24px; 
    padding: 0px;
}

.sectionHeading {
    font-size: 24px;
    font-weight: 700;
    text-align: left;
    color: #333333;
    margin-top: 24px;
    padding: 0px;
}

.noteHeading {
    font-size: 18px;
    font-weight: 700;
    text-align: left;
    color: #333333;
    margin-top: 20px;
    padding: 0px;
}

.noteText {
    font-size: 18px;
    font-weight: 500;
    text-align: left;
    color: #333333;
    margin: 2px 0px 0px;
    padding: 0px;
}

.highlight_blue {
    color: rgb(178, 205, 251);
}

.highlight_orange {
    color: #ffd7ae;
}

.highlight_pink {
    color: rgb(255, 191, 206);
}

.highlight_yellow {
    color: rgb(247, 206, 0);
}

.notebookGraphic {
    margin-top: 10px;
    text-align: left;
}

.notebookGraphic img {
    -o-box-shadow:      0px 0px 5px #888;
    -icab-box-shadow:   0px 0px 5px #888;
    -khtml-box-shadow:  0px 0px 5px #888;
    -moz-box-shadow:    0px 0px 5px #888;
    -webkit-box-shadow: 0px 0px 5px #888;
    box-shadow:         0px 0px 5px #888; 
    max-width: 100%;
    height: auto;
}

hr {
    border: 0px none;
    height: 1px;
    background: none repeat scroll 0% 0% rgb(221, 221, 221);
}
</style>
</head>
<body>
<div class='bodyContainer'>
<h1><div class='notebookFor'>Notes and highlights for</div><div class='bookTitle'>the-art-of-debugging-with-gdb-ddd-and-eclipse
</div><div class='authors'>

</div></h1><hr/>
<div class='noteText'>THE ART OF DEBUGGING with GDB, DDD, and Eclipse by Norman Matloff and Peter Jay Salzman</div><hr/>
<h2 class='sectionHeading'>1: Some Preliminaries for Beginners and Pros</h2><h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 12</div><div class='noteText'>To run GDB in TUI mode, you can either specify the option -tui on the command line when invoking GDB or type CTRL-X-A from within GDB while in non-TUI mode.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 13</div><div class='noteText'>In TUI mode, the arrow keys are for scrolling the source code subwindow, and you scroll through previous GDB commands by using CTRL-P and CTRL-N.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 14</div><div class='noteText'>Here are a few of CGDB’s basic commands and conventions: • Hit ESC to go from the command window to the source code window; hit i to get back. • While in the source window, move around by using the arrow keys or vi-like keys (j for down, k for up, / to search). • The next line to be executed is marked by an arrow. • To set a breakpoint at the line currently highlighted by the cursor, just hit the spacebar. • Breakpoint lines have their line numbers highlighted in red.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 14</div><div class='noteText'>GDB’s next command, which was also mentioned earlier, tells GDB to execute the next line and then pause. The step command is similar, except that at function calls it will enter the function, whereas next will result in the next pause in execution occurring at the line following the function call.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 15</div><div class='noteText'>In GDB, the continue command tells the debugger to resume execution and continue until a breakpoint is hit.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 15</div><div class='noteText'>In GDB the tbreak command is similar to break, but it sets a breakpoint that only stays in effect until the first time the specified line is reached.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 15</div><div class='noteText'>GDB also has until and finish commands, which create special kinds of one-time breakpoints.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 17</div><div class='noteText'>Watchpoints are usually not as useful for local variables as they are for variables with wider scope, because a watchpoint set on a local variable is canceled as soon as the variable goes out of scope, that is, when the function in which the variable is defined terminates. However, local variables in main() are an obvious exception, as such variables are not deallocated until the program finishes execution.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 18</div><div class='noteText'>When issuing GDB’s frame command, the frame of the currently executing function is numbered 0, its parent frame (that is, the stack frame of the function’s caller) is numbered 1, the parent’s parent is numbered 2, and so on. GDB’s up command takes you to the next parent in the call stack (for example, to frame 1 from frame 0), and down takes you in the other direction. Such operations are very useful, because the values of the local variables in some of the earlier stack frames may give you a clue as to what caused a bug.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 18</div><div class='noteText'>GDB’s backtrace command will show you the entire stack, that is, the entire collection of frames currently in existence.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 21</div><div class='noteText'>Important: You can use the -g option to GCC to tell the compiler to save the symbol table—that is, the list of memory addresses corresponding to your program’s variables and lines of code—within the generated executable file, which here is insert_sort. This is an absolutely essential step that allows you to refer to the variable names and line numbers in the source code during a debugging session. Without this step (and something similar would have to be done if you were to use a compiler other than GCC), you could not ask the debugger to “stop at line 30” or “print the value of x,” for example.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 23</div><div class='noteText'>The $1 label means that this is the first value you’ve asked GDB to print out. (The values designated by $1, $2, $3, and so on are collectively called the value history of the debugging session.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 24</div><div class='noteText'>Ordinarily a break command makes execution pause every time the program hits the specified line. However, the second command here, condition 1 num_y==1, makes that breakpoint conditional: GDB will pause execution of the program at breakpoint 1 only when the condition num_y==1 holds. Note that unlike the break command, which accepts line numbers (or function names), condition accepts a breakpoint number. You can always use the command info break to look up the number of the desired breakpoint. (That command gives you other useful information too, such as the number of times each breakpoint has been hit so far.)</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 28</div><div class='noteText'>This shows that GDB saw that we recompiled the program and automatically reloaded the new binary and the new symbol table before running the program.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 28</div><div class='noteText'>Likewise, you should not keep exiting and restarting your text editor during your debugging session, which would also be a distraction and a waste of time. Just keep your text editor open in one window and GDB (or DDD) in another, and use a third window for trying out your program.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 34</div><div class='noteText'>It’s about time to start using the common abbreviations for the commands. These include b for break, i b for info break, cond for condition, r for run, n for next, s for step, c for continue, p for print, and bt for backtrace.</h3>
<h2 class='sectionHeading'>2: Stopping to Take a Look Around</h2><h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 48</div><div class='noteText'>However, the experienced GDB user knows that the help blurb really means the delete command deletes breakpoints, watchpoints, and catchpoints!</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 49</div><div class='noteText'>Let’s be very clear about what happened here: GDB executed lines 30 through 34, but line 35 has not executed yet. This can be confusing since many people think that GDB displays the line of code that was last executed, when in fact, it shows which line of code is about to be executed. In this case, GDB is telling us that line 35 is the next line of source code to execute. When GDB’s execution hits a breakpoint at line 35, you can think of GDB sitting and waiting between lines 34 and 35 of the source code.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 52</div><div class='noteText'>A temporary breakpoint is set with the tbreak command,</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 53</div><div class='noteText'>Line 4 is hardly the first line of main(), so what happened? As you may have guessed, one issue is that that line is executable. Recall that GDB actually works with machine language instructions, but with the magic of an enhanced symbol table, GDB gives the illusion of working with source code lines. Normally, this fact isn’t terribly important, but this is a situation in which it becomes important.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 54</div><div class='noteText'>We asked to put a breakpoint at the start of main(), but GDB placed one on the last line of main(). Now what happened? The answer is the same as before, but GCC took a more active role. With optimizations turned on, GCC noticed that although i was assigned a value, it was never used. So in an effort to generate more efficient code, GCC simply optimized lines 3 and 4 out of existence.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 55</div><div class='noteText'>C++ programmers will want to check out the catch command, which sets catchpoints. Catchpoints are similar to breakpoints, but can be triggered by different things like thrown exceptions, caught exceptions, signals, calls to fork(), loading and unloading of libraries, and many other events.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 55</div><div class='noteText'>This is one of the reasons you should never optimize code until you’re finished debugging it.2</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 55</div><div class='noteText'>The upshot of all this is that if you find that setting a breakpoint doesn’t produce a breakpoint exactly where you’d expect it to, you now know why. Don’t be surprised.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 55</div><div class='noteText'>On a line of code with multiple breakpoints, the breakpoint that triggers the break will be the breakpoint with the lowest identifier.</h3>
<h3 class='noteHeading'>Highlight (<span class='highlight_yellow'>yellow</span>) - Page 57</div><div class='noteText'>By default, the file that has GDB’s initial focus is the one containing the main() function, but the focus is changed to a different file when any of the following actions occurs: • You apply the list command to a different source file. • You step into code residing in a different source file. • GDB hits a breakpoint while executing code in a different source file.</h3>
</div> 
</body> 
</html> 
